CREATE TABLE PROBLEMAS(
	ID_PROBLEMA UUID DEFAULT UUID_GENERATE_V4(),
	ID_ALUGUEL UUID REFERENCES ALUGUEIS(ID_ALUGUEL),
	ID_USUARIO UUID REFERENCES USUARIOS(ID_USUARIO) ON DELETE CASCADE,
	ID_TIPO_PROBLEMA UUID REFERENCES TIPO_PROBLEMA(ID_TIPO_PROBLEMA),
	ID_GRAVIDADE UUID REFERENCES GRAVIDADES(ID_GRAVIDADE),
	VALOR_REEMBOLSO DECIMAL(16,2) NOT NULL,
	ID_STATUS_PROBLEMA UUID REFERENCES STATUS_PROBLEMA(ID_STATUS_PROBLEMA),
	DATA_INCLUSAO TIMESTAMPTZ DEFAULT timezone('America/Sao_Paulo', CURRENT_TIMESTAMP),
	DATA_MODIFICACAO TIMESTAMPTZ,
	PRIMARY KEY(ID_PROBLEMA)
);

CREATE UNIQUE INDEX IX_TBL_PROBLEMAS ON PROBLEMAS (ID_PROBLEMA, ID_ALUGUEL, ID_USUARIO, ID_TIPO_PROBLEMA, VALOR_REEMBOLSO, ID_GRAVIDADE, ID_STATUS_PROBLEMA, DATA_INCLUSAO);