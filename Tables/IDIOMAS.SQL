CREATE TABLE IDIOMAS(
	ID_IDIOMA UUID DEFAULT UUID_GENERATE_V4(),
	CODIGO CHAR(5) NOT NULL UNIQUE,
	DESCRICAO VARCHAR(100) NOT NULL UNIQUE,
	DATA_INCLUSAO TIMESTAMPTZ DEFAULT timezone('America/Sao_Paulo', CURRENT_TIMESTAMP),
	DATA_MODIFICACAO TIMESTAMPTZ,
	PRIMARY KEY(ID_IDIOMA)
);
	
CREATE UNIQUE INDEX IX_TBL_IDIOMAS ON IDIOMAS (ID_IDIOMA, codigo, descricao, DATA_INCLUSAO);

ALTER TABLE IDIOMAS
ADD CONSTRAINT UPPER_CONSTRAINT
CHECK(
(SUBSTRING(CODIGO,1,2) = LOWER(SUBSTRING(CODIGO,1,2))
AND SUBSTRING(CODIGO,3,1) = '-'
AND SUBSTRING(CODIGO,4) = UPPER(SUBSTRING(CODIGO,4)))
)