--SET TIMEZONE TO 'America/Sao_Paulo'; --padronizar o tz do banco.

CREATE EXTENSION IF NOT EXISTS "uuid-ossp"; -- para gerar uuid.

CREATE EXTENSION pgcrypto;

CREATE TABLE USUARIOS(
	ID_USUARIO UUID DEFAULT UUID_GENERATE_V4(),
	NOME TEXT NOT NULL,
	CPF VARCHAR(14) NOT NULL UNIQUE,
	LOGRADOURO TEXT NOT NULL,
	NUMERO VARCHAR(10) NOT NULL,
	CEP VARCHAR(10) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL UNIQUE,
	ID_SEXO UUID REFERENCES SEXO(ID_SEXO),
	DATA_NASCIMENTO DATE NOT NULL,
	DATA_INCLUSAO TIMESTAMPTZ DEFAULT timezone('America/Sao_Paulo', CURRENT_TIMESTAMP),
	DATA_MODIFICACAO TIMESTAMPTZ NULL,
	PRIMARY KEY(ID_USUARIO)
);

CREATE UNIQUE INDEX IX_TBL_USUARIOS ON USUARIOS (NOME, CPF, EMAIL, DATA_NASCIMENTO);