CREATE OR REPLACE FUNCTION 
FN_CADASTRAR_PRODUTO(P_ID_USUARIO TEXT, P_NOME TEXT, P_DESCRICAO TEXT, 
					P_VALOR_BASE_DIARIA DOUBLE PRECISION,P_VALOR_BASE_MENSAL DOUBLE PRECISION,
					P_VALOR_PRODUTO DOUBLE PRECISION, P_DATA_COMPRA TEXT)
RETURNS BOOLEAN AS $$
BEGIN
	 
	INSERT INTO PRODUTOS(
		ID_USUARIO, 
		NOME,
		DESCRICAO, 
		VALOR_BASE_DIARIA, 
		VALOR_BASE_MENSAL,
		VALOR_PRODUTO,
		DATA_COMPRA)
	VALUES(
		UUID(P_ID_USUARIO), 
		P_NOME, 
		P_DESCRICAO,
		P_VALOR_BASE_DIARIA,
		P_VALOR_BASE_MENSAL,
		P_VALOR_PRODUTO,
		TO_DATE(P_DATA_COMPRA,'YYYY-MM-DD')
		);
	
	/*
	SELECT *FROM FN_RETORNA_PRODUTO(P_ID_USUARIO)
	AS TAS T(ID_USUARIO TEXT, ID_PRODUTO TEXT, NOME_PRODUTO TEXT, DESCRICAO TEXT, BASE_DIARIA NUMERIC(16,2), 
				 BASE_MENSAL NUMERIC(16,2), VALOR_PRODUTO NUMERIC(16,2), DATA_COMPRA TEXT);
	*/
	RETURN TRUE;
	
	EXCEPTION WHEN OTHERS THEN
		PERFORM FN_REPORT_ERRO('ERRO AO CADASTRAR PRODUTO', SQLSTATE, SQLERRM, 'FN_CADASTRAR_PRODUTO', 'PRODUTOS', CURRENT_QUERY());
		RETURN FALSE;
END;
$$ LANGUAGE PLPGSQL;

/*
SELECT FN_CADASTRAR_PRODUTO('fc638b3d-cdec-4a94-9177-2d583effec33', 'GO PRO', '*IMAGINE UMA DESCRICAO PICA*',
							10.00, 100.00, 1000, '2020-05-01');
*/