CREATE OR REPLACE FUNCTION FN_DELETA_USUARIO(P_ID_USUARIO UUID)
RETURNS BOOLEAN AS $$
BEGIN
	
	UPDATE USUARIOS
	SET ISDELETADO = FALSE
	WHERE ID_USUARIO = P_ID_USUARIO;
	
	EXCEPTION WHEN OTHERS THEN
		PERFORM FN_REPORT_ERRO('ERRO AO DELETAR USUARIO', SQLSTATE, SQLERRM, 'FN_DELETA_USUARIO', 'USUARIOS', CURRENT_QUERY());
		RETURN FALSE;
END;
$$ LANGUAGE PLPGSQL;

/*
SELECT FN_DELETA_USUARIO('8E7578B4-79DD-47F7-9C80-B0B7917166AB')
*/