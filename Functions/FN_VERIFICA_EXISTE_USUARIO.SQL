CREATE OR REPLACE FUNCTION FN_VERIFICA_EXISTE_USUARIO(P_EMAIL VARCHAR(50), P_CPF VARCHAR(14))
RETURNS BOOLEAN AS $$
DECLARE EXISTE BOOLEAN;
BEGIN
	SELECT (EMAIL = P_MAIL AND CPF = DOC) 
	INTO EXISTE 
	FROM USUARIOS
	WHERE (EMAIL = P_MAIL AND CPF = DOC);
	
	IF EXISTE IS NULL THEN
		EXISTE := FALSE;
	END IF;
	
	RETURN EXISTE;
	
	EXCEPTION WHEN OTHERS THEN
		PERFORM FN_REPORT_ERRO('VERIFICAR LOGIN', sqlstate, sqlerrm, 'FN_VERIFICA_EXISTE_USUARIO', 'USUARIOS', CURRENT_QUERY());
		RETURN FALSE;
	
END;
$$ language 'plpgsql';

--SELECT FN_VERIFICA_EXISTE_USUARIO('fabriciots99@gmail.com', '34691925880');