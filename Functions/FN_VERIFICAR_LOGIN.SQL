CREATE OR REPLACE FUNCTION FN_VERIFCAR_LOGIN(P_LOGIN TEXT)
RETURNS SETOF RECORD AS $$
BEGIN

	RETURN QUERY
	SELECT 
	CAST(A.ID_USUARIO AS TEXT),
	CAST(A.LOGIN AS TEXT),
	CAST(A.PASSWORD AS TEXT),
	A.ADMIN,
	U.ATIVO
	--INTO IS_CORRECT, USUARIO
	FROM AUTENTIFICACAO A
	INNER JOIN USUARIOS U
	ON U.ID_USUARIO = A.ID_USUARIO
	WHERE A.LOGIN = P_LOGIN;
		
	EXCEPTION WHEN OTHERS THEN
		PERFORM FN_REPORT_ERRO('ERRO AO VERIFICAR O LOGIN', sqlstate, sqlerrm, 'FN_VERIFCAR_LOGIN', 'AUTENTIFICACAO', CURRENT_QUERY());
		RETURN;
END;
$$  LANGUAGE plpgsql